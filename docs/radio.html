<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="user-scalable=no">
      <title>Howler.js Radio</title>
      <link rel="stylesheet" href="./radio.css">
   </head>
   <body>
      <div class="title" style="text-align: center;color: aquamarine;"> Radio </div>
      <div class="padding"></div>
      <div id="station0" class="station">
         <div class="title">
            <div id="title0" class="subtitle"></div>
            <div id="live0" class="live">LIVE</div>
            <div id="playing0" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station1" class="station">
         <div class="title">
            <div id="title1" class="subtitle"></div>
            <div id="live1" class="live">LIVE</div>
            <div id="playing1" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station2" class="station">
         <div class="title">
            <div id="title2" class="subtitle"></div>
            <div id="live2" class="live">LIVE</div>
            <div id="playing2" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station3" class="station">
         <div class="title">
            <div id="title3" class="subtitle"></div>
            <div id="live3" class="live">LIVE</div>
            <div id="playing3" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station4" class="station">
         <div class="title">
            <div id="title4" class="subtitle"></div>
            <div id="live4" class="live">LIVE</div>
            <div id="playing4" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station5" class="station">
         <div class="title">
            <div id="title5" class="subtitle"></div>
            <div id="live5" class="live">LIVE</div>
            <div id="playing5" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station6" class="station">
         <div class="title">
            <div id="title6" class="subtitle"></div>
            <div id="live6" class="live">LIVE</div>
            <div id="playing6" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station7" class="station">
         <div class="title">
            <div id="title7" class="subtitle"></div>
            <div id="live7" class="live">LIVE</div>
            <div id="playing7" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station8" class="station">
         <div class="title">
            <div id="title8" class="subtitle"></div>
            <div id="live8" class="live">LIVE</div>
            <div id="playing8" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station9" class="station">
         <div class="title">
            <div id="title9" class="subtitle"></div>
            <div id="live9" class="live">LIVE</div>
            <div id="playing9" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station10" class="station">
         <div class="title">
            <div id="title10" class="subtitle"></div>
            <div id="live10" class="live">LIVE</div>
            <div id="playing10" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station11" class="station">
         <div class="title">
            <div id="title11" class="subtitle"></div>
            <div id="live11" class="live">LIVE</div>
            <div id="playing11" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station12" class="station">
         <div class="title">
            <div id="title12" class="subtitle"></div>
            <div id="live12" class="live">LIVE</div>
            <div id="playing12" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>
      <div id="station13" class="station">
         <div class="title">
            <div id="title13" class="subtitle"></div>
            <div id="live13" class="live">LIVE</div>
            <div id="playing13" class="playing">
               <div class="rect1"></div>
               <div class="rect2"></div>
               <div class="rect3"></div>
               <div class="rect4"></div>
               <div class="rect5"></div>
            </div>
         </div>
      </div>





      <div class="padding"></div>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.1/howler.min.js"></script>
      <script>
         var Radio = function(stations) {
          var self = this;
         
          self.stations = stations;
          self.index = 0;
          
          // Setup the display for each station.
          for (var i=0; i<self.stations.length; i++) {
            window['title' + i].innerHTML = '<b>' + self.stations[i].freq + '</b> ' + self.stations[i].title;
            window['station' + i].addEventListener('click', function(index) {
              var isNotPlaying = (self.stations[index].howl && !self.stations[index].howl.playing());
              
              radio.stop();
         
              if (isNotPlaying || !self.stations[index].howl) {
                radio.play(index);
              }
            }.bind(self, i));
          }
         };
         
         Radio.prototype = {
          play: function(index) {
            var self = this;
            var sound;
         
            index = typeof index === 'number' ? index : self.index;
            var data = self.stations[index];
         
            if (data.howl) {
              sound = data.howl;
            } else {
              sound = data.howl = new Howl({
                src: data.src,
                html5: true, 
                format: ['mp3', 'aac']
              });
            }
         
            sound.play();
         
            self.toggleStationDisplay(index, true);
         
            self.index = index;
          },
         
            stop: function() {
            var self = this;
         
            var sound = self.stations[self.index].howl;
         
            self.toggleStationDisplay(self.index, false);
         
            if (sound) {
              sound.stop();
            }
          },
         
            toggleStationDisplay: function(index, state) {
            var self = this;
         
            window['station' + index].style.backgroundColor = state ? 'rgba(255, 255, 255, 0.33)' : '';
         
            window['live' + index].style.opacity = state ? 1 : 0;
         
            window['playing' + index].style.display = state ? 'block' : 'none';
          }
         };
         
         
         var radio = new Radio([
         {
            freq: '91.1',
            title: "NTS London",
            src: 'https://stream-relay-geo.ntslive.net/stream',
            howl: null
         },  
         {
            freq: '81.4',
            title: "NTS LA",
            src: 'https://stream-relay-geo.ntslive.net/stream2',
            howl: null
          },
          {
            freq: '89.9',
            title: "Cashmere Radio",
            src: 'https://cashmereradio.out.airtime.pro/cashmereradio_a',
            howl: null
          },
          {
            freq: '98.3',
            title: "BBC6",
            src: 'http://bbcmedia.ic.llnwd.net/stream/bbcmedia_6music_mf_p',
            howl: null
          },
          {
            freq: '89.9',
            title: "The Lot Radio",
            src: 'http://thelot.out.airtime.pro:8000/thelot_b',
            howl: null
          },
          {
            freq: '89.9',
            title: "Threads",
            src: 'https://streamer.radio.co/s1e48aa7d7/listen',
            howl: null
          },
          {
            freq: '89.9',
            title: "Threads*",
            src: 'https://streams.radio.co/s906aff08d/listen',
            howl: null
          },
          {
            freq: '89.9',
            title: "Netil Radio",
            src: 'https://edge-studio-01-production.mixlr.com/stations/goxli',
            howl: null
          },
          {
            freq: '89.9',
            title: "Noods Radio",
            src: 'https://edge-studio-01-production.mixlr.com/stations/goxli',
            howl: null
          },
          {
            freq: '89.9',
            title: "Worldwide FM",
            src: 'https://worldwidefm.out.airtime.pro/worldwidefm_b',
            howl: null
          },
          {
            freq: '89.9',
            title: "Rinse FM - not sure if it'll work",
            src: 'https://streamer-uk.rinse.fm:8443/stream',
            howl: null
          },
          {
            freq: '89.9',
            title: "Rinse FM France",
            src: 'https://radio10.pro-fhi.net/radio/9041/stream',
            howl: null
          },
          {
            freq: '89.9',
            title: "Balamii",
            src: 'https://balamii.out.airtime.pro//balamii_b',
            howl: null
          },
        ]);
          
      </script>
   </body>
</html>